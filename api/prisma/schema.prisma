generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Invitation {
  id              String    @id @default(cuid())
  code            String    @unique
  primaryGuest    String
  maxGuests       Int       @default(1)
  confirmed       Boolean   @default(false)
  confirmedAt     DateTime?
  guests          Guest[]
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
}

model Guest {
  id            String     @id @default(cuid())
  fullName      String
  invitation    Invitation @relation(fields: [invitationId], references: [id], onDelete: Cascade)
  invitationId  String
  createdAt     DateTime   @default(now())
  updatedAt     DateTime   @updatedAt
}

model gallery_sections {
  id           BigInt          @id @default(autoincrement())
  name         String
  description  String?
  order        Int             @default(0)
  allow_upload Boolean         @default(true)
  is_active    Boolean         @default(false)
  created_at   DateTime        @default(now())
  updated_at   DateTime        @default(now())
  media        gallery_media[]
}

model gallery_media {
  id          BigInt          @id @default(autoincrement())
  section_id  BigInt
  file_path   String
  public_url  String
  type        String
  name        String?
  size        Int?
  created_at  DateTime        @default(now())
  updated_at  DateTime        @default(now())
  section     gallery_sections @relation(fields: [section_id], references: [id], onDelete: Cascade)
}

enum MediaType {
  IMAGE
  VIDEO
}
